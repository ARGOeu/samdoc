<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>SAM Doc : Update-06</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            SAM Doc : Update-06
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on May 11, 2011 by <font color="#0050B2">prodrigu</font>.
				    </div>

				    <h1><a name="Update-06-Release%3A"></a>Release: Update-06</h1>

<h2><a name="Update-06-Summary"></a>Summary</h2>

<div class='table-wrap'>
<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> Start Date </td>
<td class='confluenceTd'> 27 Sep 2010 </td>
</tr>
<tr>
<td class='confluenceTd'> End Date </td>
<td class='confluenceTd'> 22 Oct 2010 </td>
</tr>
<tr>
<td class='confluenceTd'> Status </td>
<td class='confluenceTd'> <font color="red">Released</font> </td>
</tr>
<tr>
<td class='confluenceTd'> Release Date </td>
<td class='confluenceTd'> 27 Oct 2010 </td>
</tr>
<tr>
<td class='confluenceTd'> Release Manager </td>
<td class='confluenceTd'> James C </td>
</tr>
<tr>
<td class='confluenceTd'> Main Activities </td>
<td class='confluenceTd'><ul>
	<li>Finalize single DB merge</li>
	<li>ATP features for VO feeds</li>
	<li>MyEGI first beta release</li>
	<li>Update Internal version of Nagios to 3.2.3</li>
</ul>
</td>
</tr>
<tr>
<td class='confluenceTd'> Notes </td>
<td class='confluenceTd'> Update-06 Kickoff Meeting : <a href="https://tomtools.cern.ch/confluence/display/TOMTEAM/100927-Update-06-Start" title="100927-Update-06-Start">100927-Update-06-Start</a> </td>
</tr>
</tbody></table>
</div>


<h2><a name="Update-06-ValidationStepsperformed"></a>Validation Steps performed</h2>

<ul>
	<li>Outlined in <a href="https://tomtools.cern.ch/jira/browse/SAM-847">SAM-847</a></li>
	<li>Announced for Stage Rollout 27/Oct/2010</li>
	<li>Cleared staged rollout 15/Nov/2010 (20 days in Staged Rollout)
	<ul>
		<li>Early Adopter Report - <a href="https://documents.egi.eu/document/257">https://documents.egi.eu/document/257</a></li>
	</ul>
	</li>
</ul>


<h2><a name="Update-06-Listofpackagesupdatedinthisrelease"></a>List of packages updated in this release</h2>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>atp-1.15.4-1.el5
atp-web-1.15.4-1.el5
glite-yaim-nagios-1.0.115-2
grid-monitoring-config-gen-0.74.3-1.el5
grid-monitoring-fm-nagios-remote-0.18.1-1.el5
grid-monitoring-org.nagiosexchange-probes-0.10-1.el5
grid-monitoring-probes-org.sam-0.1.17-1.el5
myegi-0.2.7-1.el5
msg-nagios-bridge-1.0.56-1.el5
nagios-3.2.3-1.el5.rf.7oat
perl-GridMon-1.0.58-1.el5
python-GridMon-1.1.11-1.el5
</pre>
</div></div>

<h2><a name="Update-06-ReleaseNotes"></a>Release Notes</h2>

<ul>
	<li>Note that <a href="Update-05.html" title="Update-05">Update-05</a> was an internal release, so all the changes that are part of Update-05 will be part of Update-06 (i.e. more RPMs will have changed than just the list above.  The additional rpms from Update-05 are:</li>
</ul>


<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>mddb-1.0.10-1.noarch
mddb-synchronizer-1.0.10-1.noarch
nagios2metricstore-1.0.28-2.el5
nagios-oat-cgi-0.4-1.el5
perl-TOM-0.9-1.el5
</pre>
</div></div>

<p>The following package is upgraded in EPEL:</p>
<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>perl-Directory-Queue-1.0-1.el5
</pre>
</div></div>


<div class='panelMacro'><table class='warningMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>Before running NCG to upgrade you <font color="red"><b>must</b></font> run the following script: <a href="https://tomtools.cern.ch/jira/secure/attachment/10069/myegee-old-create.sh">myegee-old-create.sh</a>.  It will create a myegee instance (at https:NAGIOS_HOST/myegee-old/) to point to the old myegee databases.</td></tr></table></div>

<div class='panelMacro'><table class='warningMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/forbidden.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><a href="" title="Update-06">Update-06</a> has a major change in the way databases are used on the regional Nagios instances.  From this point on a <b>single database schema</b> is used to store the contents of MDDB, ATP and MRS.  You neee to specify new parameters in YAIM - These are described in <a href="Update-05.html" title="Update-05">Update-05</a> Release Notes</td></tr></table></div>

<ul>
	<li>This update will install MyEGI for the first time, so you need to set several new YAIM variables for MyEGI:
<div class='table-wrap'>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> Variable </th>
<th class='confluenceTh'> Description </th>
<th class='confluenceTh'> Default / Optional </th>
<th class='confluenceTh'> Example </th>
</tr>
<tr>
<td class='confluenceTd'> MYEGI_ADMIN_NAME </td>
<td class='confluenceTd'> System administrator name </td>
<td class='confluenceTd'> Optional </td>
<td class='confluenceTd'> David Horat </td>
</tr>
<tr>
<td class='confluenceTd'> MYEGI_ADMIN_EMAIL </td>
<td class='confluenceTd'> System administrator email </td>
<td class='confluenceTd'> Optional </td>
<td class='confluenceTd'> example@example.com </td>
</tr>
<tr>
<td class='confluenceTd'> MYEGI_DEFAULT_PROFILE </td>
<td class='confluenceTd'> Default nagios profile </td>
<td class='confluenceTd'> Default: ROC_CRITICAL </td>
<td class='confluenceTd'> ROC </td>
</tr>
<tr>
<td class='confluenceTd'> MYEGI_REGION </td>
<td class='confluenceTd'> Default region to show </td>
<td class='confluenceTd'> Optional </td>
<td class='confluenceTd'> Italy </td>
</tr>
<tr>
<td class='confluenceTd'> MYEGI_DATABASE_ENGINE </td>
<td class='confluenceTd'> Type of DB (values: mysql/oracle) </td>
<td class='confluenceTd'> Default: mysql </td>
<td class='confluenceTd'> oracle </td>
</tr>
<tr>
<td class='confluenceTd'> MYEGI_DATABASE_USER </td>
<td class='confluenceTd'> The database username for the MyEGI portal </td>
<td class='confluenceTd'> Default: myegi </td>
<td class='confluenceTd'> myegi </td>
</tr>
<tr>
<td class='confluenceTd'> MYEGI_DATABASE_NAME </td>
<td class='confluenceTd'> The database name to use by the MyEGI portal </td>
<td class='confluenceTd'> Default: mrs </td>
<td class='confluenceTd'> mrs </td>
</tr>
<tr>
<td class='confluenceTd'> MYEGI_DATABASE_PASSWORD </td>
<td class='confluenceTd'> The database password for the MyEGI portal </td>
<td class='confluenceTd'> <b>MANDATORY</b> </td>
<td class='confluenceTd'> lemon </td>
</tr>
<tr>
<td class='confluenceTd'> MYEGI_DATABASE_HOST </td>
<td class='confluenceTd'> The database hostname </td>
<td class='confluenceTd'> Default: localhost </td>
<td class='confluenceTd'> localhost </td>
</tr>
<tr>
<td class='confluenceTd'> MYEGI_DATABASE_PORT </td>
<td class='confluenceTd'> The database port </td>
<td class='confluenceTd'> Optional </td>
<td class='confluenceTd'> 3306 </td>
</tr>
<tr>
<td class='confluenceTd'> MYEGI_DEBUG </td>
<td class='confluenceTd'> Turn on/off debug mode for MyEGI (values: True/False) </td>
<td class='confluenceTd'> Default: False </td>
<td class='confluenceTd'> True </td>
</tr>
</tbody></table>
</div>
</li>
</ul>


<div class='panelMacro'><table class='tipMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/check.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Tip</b><br />The new MyEGI instance will be available at <a href="https://NAGIOS_HOST/myegi/">https://NAGIOS_HOST/myegi/</a>.  We appreciate <b>all feedback</b> on this new component through <a href="https://gus.fzk.de/">GGUS</a>.</td></tr></table></div>

<ul>
	<li><em>Setting LFC and SE for WN tests from YAIM</em>. Set JOBSUBMIT_WN_LFC and/or JOBSUBMIT_WN_SE_REP variables in site-info.def if you want to point to a specific LFC and/or SE on WN for replica management tests (org.sam.WN-Rep{Cr,Rep}). If set, config_ncg YAIM function creates $NCG_MAIN_DB_DIR/jobsubmit file, which will contain MODIFY_METRIC_PARAMETER definitions for NCG to configure respective Nagios service objects providing &#45;-wn-lfc / &#45;-wn-se-rep parameters to {CREAM}CE-probe probes. If not set, metrics will use default LFC/SE, which can be checked by running ./CE-probe &#45;h and looking for &#45;-wn-lfc &#45;-wn-se-rep parameters. The LFC should be writable.</li>
</ul>



<h2><a name="Update-06-KnownIssues"></a>Known Issues</h2>

<ul>
	<li>MyEGI has an issue with rendering services that have been removed and added back again in the case where no new test results are received after they come back - there is a discrepancy between the status and the history views <a href="https://tomtools.cern.ch/jira/browse/SAM-881">SAM-881@jira</a></li>
	<li>There is an issue with replica management tests segfaulting in lcg_util in lcg-gt/lcg_gt3() on certain combination of parameters returned by SRM (org.sam.SRM-GetTURLs metric). The issue was investigated with NGI_IT admins (<a href="https://gus.fzk.de/ws/ticket_info.php?ticket=63399">ggus #63399</a>). <a href="https://savannah.cern.ch/bugs/?74459">Bug report #74459</a> against lcg_util was submitted and confirmed by lcg_util developers. updated on Thursday, October 28 2010 org.sam.SRM-GetTURLs was re-written to use lcg_util CLI lcg-gt to avoid the segfault in lcg_util affecting the metric. If segfault detected - the metric returns WARNING. The issue was tracked in <a href="https://tomtools.cern.ch/jira/browse/SAM-892">SAM-892@jira</a>.</li>
</ul>



<h2><a name="Update-06-ListofIssuesfixedinthisrelease"></a>List of Issues fixed in this release</h2>

<div class="error"><span class="error">jiraissues: Unable to determine if sort should be enabled.</span> </div>

<h2><a name="Update-06-Metricsforthisrelease"></a>Metrics for this release</h2>
<table class="sectionMacro" border="0" cellpadding="5" cellspacing="0" width="100%"><tbody><tr>
<td class="confluenceTd" valign="top" width="50%">
<div class="error"><span class="error">gadget: Error rendering gadget [ https://tomtools.cern.ch/jira/rest/gadgets/1.0/g/com.atlassian.jira.gadgets:pie-chart-gadget/gadgets/piechart-gadget.xml ] </span> <p>projectOrFilterId=filter-10060&amp;statType=issuetype&amp;isConfigured=true&amp;refresh=false</p></div>
<div class="error"><span class="error">gadget: Error rendering gadget [ https://tomtools.cern.ch/jira/rest/gadgets/1.0/g/com.atlassian.jira.gadgets:average-age-chart-gadget/gadgets/average-age-gadget.xml ] </span> <p>projectOrFilterId=filter-10060&amp;periodName=daily&amp;daysprevious=90&amp;isConfigured=true&amp;refresh=false</p></div></td>
<td class="confluenceTd" valign="top">
<div class="error"><span class="error">gadget: Error rendering gadget [ https://tomtools.cern.ch/jira/rest/gadgets/1.0/g/com.atlassian.jira.gadgets:pie-chart-gadget/gadgets/piechart-gadget.xml ] </span> <p>projectOrFilterId=filter-10060&amp;statType=components&amp;isConfigured=true&amp;refresh=false</p></div>
<div class="error"><span class="error">gadget: Error rendering gadget [ https://tomtools.cern.ch/jira/rest/gadgets/1.0/g/com.atlassian.jira.gadgets:created-vs-resolved-issues-chart-gadget/gadgets/createdvsresolved-gadget.xml ] </span> <p>projectOrFilterId=filter-10060&amp;periodName=daily&amp;daysprevious=30&amp;isCumulative=true&amp;showUnresolvedTrend=false&amp;versionLabel=major&amp;isConfigured=true&amp;refresh=false</p></div></td></tr></tbody></table>

				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="https://tomtools.cern.ch/confluence/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Feb 27, 2014 10:19</font></td>
		    </tr>
	    </table>
    </body>
</html>
