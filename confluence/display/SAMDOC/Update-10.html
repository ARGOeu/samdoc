<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>SAM Doc : Update-10</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            SAM Doc : Update-10
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on May 11, 2011 by <font color="#0050B2">prodrigu</font>.
				    </div>

				    <h1><a name="Update-10-Release%3A"></a>Release: Update-10</h1>

<h2><a name="Update-10-Summary"></a>Summary</h2>

<div class='table-wrap'>
<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> Start Date </td>
<td class='confluenceTd'> 21 Feb 2011 </td>
</tr>
<tr>
<td class='confluenceTd'> End Date </td>
<td class='confluenceTd'> 07 Apr 2011 </td>
</tr>
<tr>
<td class='confluenceTd'> Status </td>
<td class='confluenceTd'> <font color="#ff0000">Released</font><br class="atl-forced-newline" /> </td>
</tr>
<tr>
<td class='confluenceTd'> Release Date </td>
<td class='confluenceTd'> 07 Apr 2011 <br class="atl-forced-newline" /> </td>
</tr>
<tr>
<td class='confluenceTd'> Release Manager </td>
<td class='confluenceTd'> Wojciech Lapka <br class="atl-forced-newline" /> </td>
</tr>
<tr>
<td class='confluenceTd'> Main Activities </td>
<td class='confluenceTd'> &#42; Suppport for gLExec <br class="atl-forced-newline" />
&#42; New yaim variables for timeouts <br class="atl-forced-newline" />
&#42; Bug fixes <br class="atl-forced-newline" />
&#42; Documentation improvements <br class="atl-forced-newline" />
&#42; Repository change <br class="atl-forced-newline" /> </td>
</tr>
<tr>
<td class='confluenceTd'> Notes </td>
<td class='confluenceTd'> None </td>
</tr>
</tbody></table>
</div>


<h2><a name="Update-10-ValidationStepsperformed"></a>Validation Steps performed</h2>

<ul>
	<li>Outlined in <a href="https://tomtools.cern.ch/jira/browse/SAM-1295">SAM-1295</a></li>
	<li>Announced for Stage Rollout - 07 Apr 2011 (Update 10), 28 April 2011 (Update 10.1)</li>
	<li>Cleared staged rollout - 03 May 2011
	<ul>
		<li>Early Adopter Report - <a href="https://documents.egi.eu/document/492">SAM-Update-10-EA-Report</a></li>
	</ul>
	</li>
</ul>


<h2><a name="Update-10-Listofpackagesupdatedinthisrelease"></a>List of packages updated in this release</h2>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>atp-1.16.8-12.el5
atp-web-1.16.8-12.el5
glite-yaim-nagios-1.3.1-5.el5
grid-monitoring-config-gen-0.78.5-1.el5
grid-monitoring-org.nagiosexchange-probes-0.17-1.el5
msg-consume2db-1.0.20-1.el5 (Only on central egee-NAGIOS-WEB machine)
myegi-0.5.4-6.el5
nagios2metricstore-1.0.33-3.el5
perl-TOM-1.7-1.el5
sam-release-1.10.0-1.el5
</pre>
</div></div>

<h2><a name="Update-10-ReleaseNotes"></a>Release Notes</h2>

<ul>
	<li>Support for gLExec tests.
<div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>gLExec services need to be declared in GOCDB in order to be picked up by ATP and tested by Nagios. Monitoring requires additional configuration defined below.</td></tr></table></div></li>
	<li>Load OSG downtimes to ATP - only in central instance (egee-NAGIOS-WEB) by default</li>
	<li>ATP and MDB sync timeout parameters configurable by YAIM.</li>
	<li>Setting NCG_GOCDB_ROC_NAME to ALL configures Nagios for all ROCs</li>
	<li>Bug fixes in service status and availability computations</li>
	<li>Bug fixes in MyEGI web services</li>
	<li>Repository change - use rpmforge instead of dag, enable extras (details: <a href="https://tomtools.cern.ch/jira/browse/SAM-1389">SAM-1389</a>)</li>
	<li>Documentation improvements (glexec setup, how to use alternative LFC, BDII, SE)</li>
</ul>



<h2><a name="Update-10-Configurationchanges"></a>Configuration changes</h2>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>Following YAIM variables added or modified:

# setting NCG_GOCDB_ROC_NAME configures SAM for all NGIs in GOCDB (SAM-1307)
# (not to be used by NGIs)
NCG_GOCDB_ROC_NAME=ALL

# modifying timeout for ATP and MDDB synchronizers (SAM-1212)
ATP_SYNC_TIMEOUT=1200
MDDB_SYNC_TIMEOUT=1200

# instruct SAM to use one specific broker instead
# of the broker network (SAM-1146)
# (not to be used on production)
MSG_BROKER_CACHE_HOST=my.broker.host

#Add GLEXEC to MDDB supported profiles
NCG_MDDB_SUPPORTED_PROFILES="ROC,ROC_CRITICAL,ROC_OPERATORS,GLEXEC"
</pre>
</div></div>

<div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>Note that after upgrade and before YAIM execution, atp_synchro.conf.rpmnew configuration file should replace the existing one, i.e.
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="theme: Confluence; brush: java; gutter: false">mv /etc/atp/atp_synchro.conf.rpmnew /etc/atp/atp_synchro.conf</pre>
</div></div></td></tr></table></div>

<div class='panelMacro'><table class='noteMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>YAIM needs to be executed after the upgrade. Note that there's DB upgrade of 'metricstore' and 'atp' schemas so the execution will take longer.</td></tr></table></div>


<p>Service gLExec requires pilot role in the VOMS proxy certificate. In order to monitor gLExec services make sure that you have permission for the pilot role in your VO. In the Yaim configuration set the following variables:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="theme: Confluence; brush: plain; gutter: false">NCG_HASH_CONFIG_PROFILES=&amp;lt;role_name&amp;gt;,GLEXEC
NCG_PROFILE_FQAN_GLEXEC=/&amp;lt;vo_name&amp;gt;/Role=pilot</pre>
</div></div>
<p>where &lt;role_name&gt; is name of your role in capital letters. Correct setting for NGI instances:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="theme: Confluence; brush: plain; gutter: false">NCG_HASH_CONFIG_PROFILES=NGI,GLEXEC
NCG_PROFILE_FQAN_GLEXEC=/ops/Role=pilot</pre>
</div></div>

<h2><a name="Update-10-KnownIssues"></a>Known Issues</h2>

<p><font color="red">None</font></p>

<h2><a name="Update-10-ListofIssuesfixedinthisrelease"></a>List of Issues fixed in this release</h2>

<div class="error"><span class="error">jiraissues: Unable to determine if sort should be enabled.</span> </div>

				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="https://tomtools.cern.ch/confluence/images/border/border_bottom.gif"><img src="images/border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Feb 27, 2014 10:19</font></td>
		    </tr>
	    </table>
    </body>
</html>
